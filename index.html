<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=350, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
  <title>¬°Juega Plinko y Gana tu Bono!</title>
  <meta name="description" content="¬°Juega Plinko gratis y consigue tu bono exclusivo en M√©xico! Participa, gana y recoge tu premio especial para nuevos usuarios. Solo por tiempo limitado.">
  <link rel="preload" as="image" href="preland-mx.webp" type="image/webp">
  <style>
    html, body {height:100%;margin:0;padding:0;}
    body {
      min-height: 100vh;
      font-family: Arial, sans-serif;
      color: #1d1d1d;
      box-sizing: border-box;
      padding-bottom: env(safe-area-inset-bottom, 0px);
      position: relative;
      overflow-x: hidden;
    }
    #main-bg {
      position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: -2;
      background: url('preland-mx.webp') no-repeat top center;
      background-size: cover;
    }
    #overlay {
      position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: -1;
      background: rgba(255,255,255,0.22);
      backdrop-filter: blur(2.2px);
    }
    #loader {
      position: fixed; left: 0; top: 0; width: 100vw; height: 100vh; z-index: 1100;
      background: #fff; display: flex; align-items: center; justify-content: center;
      font-size: 1.4em; font-weight: bold; color: #19be6b; letter-spacing: 1px;
      transition: opacity .4s;
    }
    #loader.hide { opacity:0; pointer-events:none; }

    #online, #today {
      position: relative;
      text-align: center;
      font-size: 1.03em;
      margin: 0 0 3px 0;
      padding: 3px 0 0 0;
      background: rgba(255,255,255,0.18);
      border-radius: 10px;
      box-shadow: 0 2px 10px #fff5;
      width: 93vw;
      max-width: 350px;
      margin-left: auto; margin-right: auto;
      color: #146d31;
    }

    #chatbox {
      font-size:1em;background:#fff6; padding:3px 0 3px 0;overflow:hidden; height:32px;
      width: 93vw; max-width: 350px; margin: 0 auto 6px auto;
      border-radius: 10px; box-shadow: 0 2px 10px #fff5;
      color:#146d31;
    }
    #game { 
      max-width: 350px; margin: 0 auto; padding-top: 13px;
      width: 96vw; position: relative; z-index: 3;
    }
    h1 {font-size:1.32em;margin:11px 0 2px 0;font-weight:bold;text-align:center; color:#168b39;}
    #counter, #score, #tip {
      color: #168b39; text-shadow: 0 2px 7px #fff, 0 0 2px #fff;
      font-weight: bold;
    }
    #counter {font-size:1.13em;margin-bottom:7px;}
    #score { font-size: 1.21em; margin-bottom: 10px; letter-spacing: 1px;}
    #tip {font-size: 1em; margin-top: 6px; opacity: 0.98;}
    .board-wrap {
      position:relative;
      width: 100%; height: 300px;
      margin-bottom: 12px; z-index: 3;
    }
    #board-bg {
      position: absolute; left: 0; top: 0; width: 100%; height: 100%;
      background: rgba(255,255,255,0.42);
      border-radius: 22px; z-index: 1; pointer-events: none;
      box-shadow: 0 3px 25px #fff7, 0 0 0 #fff;
    }
    #board { 
      position: absolute; left: 0; top: 0; width: 100%; height: 100%;
      background: transparent; overflow: hidden; box-sizing: border-box; z-index: 2;
    }
    .peg { 
      width: 8px; height: 8px; background: #17854c; border-radius: 50%; position: absolute;
      box-shadow: 0 0 7px #fff, 0 0 3px #000;
    }
    .slot { 
      width: calc((100% / 9) - 3px); min-width: 18px; max-width: 32px;
      height: 20px;
      background: rgba(20,40,20,0.94);
      border-radius: 7px; position: absolute; bottom: 0; 
      text-align: center; line-height: 20px; font-weight: bold; font-size:0.95em;
      color: #ffd24e; border: 2px solid #fff; text-shadow: 0 0 8px #222;
      transition: background 0.25s, color 0.15s;
      z-index: 2;
    }
    .slot.flash { animation: slotFlash .45s linear; }
    @keyframes slotFlash { 0%{box-shadow:0 0 10px #fff;} 100%{box-shadow:none;} }
    .slot.green { background: linear-gradient(90deg,#33ce7c,#16e157 70%); color: #fff; border-color: #33ce7c;}
    .slot.red { background: linear-gradient(90deg,#c32828,#f94b4b 70%); color: #fff; border-color: #c32828;}
    .slot.orange { background: linear-gradient(90deg,#FFA500,#FFD24E 90%); color: #333; border-color: #FFA500;}
    .slot.bright-orange { background: linear-gradient(90deg,#FFD24E,#FFA500 70%); color: #222; border-color: #FFD24E;}
    .slot.dark-orange { background: linear-gradient(90deg,#C36A2D,#FFA500 80%); color: #fff; border-color: #C36A2D;}

    .ball { 
      width: 13px; height: 13px; background: #0bb25b; border-radius: 50%; 
      position: absolute; border: 2.2px solid #fff;
      box-shadow: 0 0 20px #19be6b, 0 0 6px #fff, 0 0 18px #fff3; z-index: 10;
    }
    .trail { 
      position:absolute; border-radius:50%; pointer-events:none; opacity:0.13; z-index:2; 
      background: radial-gradient(circle, #FFD24E 14%, #19BE6B 32%, transparent 90%);
    }
    #start-btn {
      width: 94%; margin: 18px auto 10px auto; display: block; font-size: 1.23em;
      padding: 18px 0; border: 3px solid #fff;
      border-radius: 22px;
      background: linear-gradient(90deg, #34e276 0%, #FFD24E 100%);
      color: #03591a; font-weight: bold;
      box-shadow: 0 0 32px #ffd24e, 0 0 0 #fff;
      text-shadow: 0 0 4px #fff9,0 0 8px #fff7;
      position: relative; cursor:pointer;
      transition: background .16s, box-shadow .18s, transform .12s;
      animation: pulsebtn 1.4s infinite alternate;
      outline: none;
      z-index: 5;
    }
    #start-btn:active { background: #ffbc00; color: #fff; box-shadow: 0 0 36px #fff3; transform: scale(1.07);}
    @keyframes pulsebtn {
      0% {box-shadow: 0 0 16px #ffd24e, 0 0 0 #fff;}
      100% {box-shadow: 0 0 40px #19be6b, 0 0 20px #fff6;}
    }

    /* –ú–æ–¥–∞–ª–∫–∞ */
    #modal-bg {
      display:none; position: fixed; left:0; top:0; width:100vw; height:100vh; z-index:100;
      background: rgba(0,0,0,0.63); justify-content: center; align-items: center;
    }
    #modal-content {
      background:#17223b; padding:22px 10px 16px 10px; border-radius:18px;
      box-shadow:0 0 48px #0008; text-align:center; color:#fff;
      max-width:90vw; margin:auto; max-height:96vh; overflow-y:auto; font-size:1.13em;
      animation:popin 0.33s cubic-bezier(.62,2.5,.42,.84);
    }
    @keyframes popin {
      0% {transform: scale(0.85); opacity: 0;}
      70% {transform: scale(1.05);}
      100% {transform: scale(1); opacity: 1;}
    }
    #promo {font-size:1.15em; color:#FFD24E;background:#168b39;padding:5px 14px;border-radius:13px;display:inline-block;margin-bottom:11px;font-weight:bold;letter-spacing:1px;}
    #collect-btn {
      margin-top:18px;padding:14px 0;border-radius:12px;border:none;
      width:100%;max-width:220px;font-size:1.07em;
      background:#19BE6B;color:#fff;font-weight:bold;
      box-shadow:0 0 15px #ffd24e; cursor:pointer;transition:background 0.19s;margin-bottom:6vw;
    }
    #collect-btn:active { background: #007d36;}
    #timer {font-size:1.06em;color:#ffd24e;font-weight:bold;margin:12px 0;}
    @media (max-width: 450px) {
      #game, .board-wrap, #online, #today, #chatbox { max-width:99vw; }
      #score {font-size:1.09em;}
    }
    /* Accessibility */
    [tabindex]:focus, button:focus {outline:2px solid #19be6b;}
  </style>
</head>
<body>
  <div id="loader" aria-label="Cargando la p√°gina...">
    <span role="img" aria-label="cargando">‚è≥</span>&nbsp;Cargando...
  </div>
  <div id="main-bg" aria-hidden="true"></div>
  <div id="overlay" aria-hidden="true"></div>
  <div id="online"></div>
  <div id="today"></div>
  <div id="chatbox" aria-live="polite"></div>
  <div id="game" aria-label="Juego Plinko">
    <h1>Juega Plinko y Gana un Bono</h1>
    <div id="counter" aria-live="polite">Bolas restantes: <span id="balls">10</span></div>
    <div id="score"><b>¬°Tu bono te est√° esperando!</b></div>
    <div class="board-wrap">
      <div id="board-bg"></div>
      <div id="board" aria-label="Tablero de juego"></div>
    </div>
    <button id="start-btn" tabindex="0" aria-label="Lanzar la bola">¬°Lanzar la bola!</button>
    <div id="tip">Presiona "¬°Lanzar la bola!" para jugar</div>
  </div>
  <!-- –ú–æ–¥–∞–ª–∫–∞ —Å –±–æ–Ω—É—Å–æ–º -->
  <div id="modal-bg" role="dialog" aria-modal="true" aria-label="Gana tu bono">
    <div id="modal-content">
      <div id="promo">¬°PROMOCODE: <b>MEX</b>!</div>
      <div style="font-size:1.16em;margin-bottom:13px;">
        ¬°Tu ganancia est√° lista! <span style="color:#ffd24e;animation:flash 0.85s infinite alternate;">üéâ</span>
      </div>
      <div id="timer" style="font-size:1.06em;color:#ffd24e;font-weight:bold;margin:12px 0;"></div>
      <div style="margin-bottom:9px;">
        <b>¬°Solo hoy!</b><br>Reg√≠strate y reclama tu bono:
      </div>
      <ul style="padding-left:17px;text-align:left;margin:12px auto 12px auto;max-width:320px;">
        <li><b>+500% bono</b> en tus primeros 4 dep√≥sitos</li>
        <li><b>Hasta 30% cashback</b></li>
        <li><b>Expresa (5+ eventos):</b> bono extra a tu ganancia</li>
      </ul>
      <button id="collect-btn" aria-label="Reclamar bono">¬°Reclamar bono!</button>
      <div style="margin-top:14px;opacity:.87;"><small>¬°No dejes pasar esta oportunidad! La oferta expirar√° en unos minutos.</small></div>
      <div id="faq-block" style="margin-top:12px;font-size:0.99em;">
        <h3 style="margin-bottom:4px;">Preguntas Frecuentes</h3>
        <ul style="padding-left:18px;text-align:left;">
          <li>Bono se acredita tras registro</li>
          <li>Solo para nuevos usuarios</li>
          <li>Oferta de socios licenciados</li>
        </ul>
      </div>
    </div>
  </div>
<script>
  // LOADER
  window.addEventListener('load',function(){
    setTimeout(function(){
      document.getElementById('loader').classList.add('hide');
      setTimeout(function(){
        document.getElementById('loader').style.display='none';
      },350);
    },350);
  });

  // CHAT & ONLINE
  const demoNames = ["Juan","Sof√≠a","Carlos","Mar√≠a","Luis","Ana","Miguel","Fernanda","Javier","Valeria","Jos√©","Paola"];
  const demoPrizes = [50,75,120,85,30,60,105,200,40,35,80,90,150,180];
  function randArr(arr){ return arr[Math.floor(Math.random()*arr.length)]; }
  function randomWinMsg(){ 
    let name = randArr(demoNames), prize = randArr(demoPrizes);
    return `<b>${name}</b> <span style="color:#ffd24e;">$${prize} MXN</span> gan√≥ un bono!`;
  }
  function setOnline() {
    let online = Math.floor(Math.random()*401)+150;
    let today = Math.floor(Math.random()*4501)+1500;
    document.getElementById('online').innerHTML = `<b>En l√≠nea ahora:</b> ${online} usuarios`;
    document.getElementById('today').innerHTML = `<b>Visitantes hoy:</b> ${today}`;
  }
  setOnline();
  function startChat() {
    const chat = document.getElementById('chatbox');
    function addMsg() {
      let div = document.createElement('div');
      div.className = 'chatmsg';
      div.innerHTML = randomWinMsg();
      chat.appendChild(div);
      if(chat.childNodes.length>3) chat.removeChild(chat.childNodes[0]);
    }
    addMsg();
    setInterval(addMsg, 2800 + Math.random()*2000);
  }
  startChat();

  // Plinko Board
  const pegRows = 8;
  const pegCols = 9;
  const slots = [13,3,1.3,0.7,0.4,0.7,1.3,3,13];
  let ballsLeft = 10, ballsActive = 0;
  const maxSimultaneousBalls = 5;
  const board = document.getElementById('board');
  let pegsArr = [];
  let lastSlotEl = null;

  function drawPegs() {
    board.innerHTML = '';
    pegsArr = [];
    const boardW = board.clientWidth || 280;
    for (let row=0; row<pegRows; row++) {
      for (let col=0; col<=row; col++) {
        let peg = document.createElement('div');
        peg.className = 'peg';
        let left = (boardW/pegCols)*(col + (pegCols-row-1)/2) + 7;
        let top = row*31+14;
        peg.style.left = left + 'px';
        peg.style.top = top + 'px';
        peg.setAttribute('aria-hidden','true');
        board.appendChild(peg);
        pegsArr.push({x: left+4, y: top+4});
      }
    }
    for (let i=0;i<slots.length;i++){
      let slot = document.createElement('div');
      slot.className = 'slot';
      let slotLeft = (boardW/pegCols)*i;
      slot.style.left = slotLeft + 'px';
      slot.innerText = slots[i];
      slot.setAttribute('aria-label', `Casilla ${i+1}, multiplicador ${slots[i]}`);
      board.appendChild(slot);
    }
  }
  window.addEventListener('DOMContentLoaded', drawPegs);
  window.addEventListener('resize', drawPegs);

  function getSlotClass(val) {
    if (val == 13) return 'green';
    if (val == 0.4) return 'red';
    if (val == 3) return 'orange';
    if (val == 1.3) return 'dark-orange';
    if (val == 0.7) return 'bright-orange';
    return '';
  }

  function launchBall() {
    if (ballsLeft <= 0 || ballsActive >= maxSimultaneousBalls) return;
    ballsActive++;
    ballsLeft--;
    if (ballsLeft < 0) ballsLeft = 0;
    document.getElementById('balls').innerText = ballsLeft;
    let boardW = board.clientWidth || 280;
    let radius = 6.5;
    let x = boardW/2 - radius + (Math.random()-0.5)*5;
    let y = 0;
    let vx = (Math.random()-0.5)*1.0;
    let vy = 0.85 + Math.random()*0.5;

    let ball = document.createElement('div');
    ball.className = 'ball';
    ball.style.left = x+'px';
    ball.style.top = y+'px';
    ball.setAttribute('aria-label', 'bola');
    board.appendChild(ball);

    function drawTrail(px, py) {
      let trail = document.createElement('div');
      trail.className = 'trail';
      trail.style.width = '17px';
      trail.style.height = '17px';
      trail.style.left = (px-4)+'px';
      trail.style.top = (py-4)+'px';
      board.appendChild(trail);
      setTimeout(()=>{ trail.style.opacity = 0; }, 80);
      setTimeout(()=>{ trail.remove(); }, 160);
    }

    let bounceLock = 0;
    let freezeBeforeSink = false;
    function animate() {
      if (freezeBeforeSink) return;
      vy += 0.10;
      x += vx;
      y += vy;
      if (Math.random() > 0.64) drawTrail(x, y);

      for (let peg of pegsArr) {
        let dx = (x+radius) - peg.x;
        let dy = (y+radius) - peg.y;
        let dist = Math.sqrt(dx*dx+dy*dy);
        if (dist < 9.5 && bounceLock === 0) {
          let angle = Math.atan2(dy, dx);
          let speed = Math.sqrt(vx*vx + vy*vy)*0.96 + 0.12;
          let newAngle = angle + (Math.random()-0.5)*0.53;
          vx = Math.cos(newAngle) * speed * 0.92;
          vy = Math.abs(Math.sin(newAngle) * speed) + 0.1;
          bounceLock = 2;
        }
      }
      if (bounceLock > 0) bounceLock--;

      if (x < 0) { x = 0; vx = -vx*0.7;}
      if (x > boardW-13) { x = boardW-13; vx = -vx*0.7;}

      ball.style.left = x+'px';
      ball.style.top = y+'px';

      if (y > 244) {
        freezeBeforeSink = true;
        setTimeout(()=>{
          let slotW = boardW/pegCols;
          let slotNum = Math.floor((x+radius)/slotW);
          if (slotNum<0) slotNum=0;
          if (slotNum>=slots.length) slotNum=slots.length-1;
          let slotCenterX = slotW*slotNum + slotW/2 - radius;
          ball.style.transition = 'top 0.52s cubic-bezier(.68,1.55,.27,.72), left 0.23s cubic-bezier(.43,1.3,.52,.75)';
          ball.style.left = slotCenterX+'px';
          ball.style.top = '266px';
          setTimeout(()=>{
            ball.remove();
            ballsActive--;
            // –ó–∞–ª–∏–≤–∫–∞ —è—á–µ–π–∫–∏
            let slotEls = board.querySelectorAll('.slot');
            if (lastSlotEl) lastSlotEl.className = 'slot';
            let curSlot = slotEls[slotNum];
            let cl = getSlotClass(slots[slotNum]);
            curSlot.classList.add('flash');
            if (cl) curSlot.classList.add(cl);
            lastSlotEl = curSlot;
            setTimeout(()=>{curSlot.classList.remove('flash');},400);

            if (ballsLeft == 0 && ballsActive == 0) showModal();
            if (ballsActive < maxSimultaneousBalls && ballsLeft > 0) {
              document.getElementById('start-btn').disabled = false;
            }
          }, 500);
        }, 110 + Math.random()*60);
        return;
      }
      requestAnimationFrame(animate);
    }
    animate();
    if (ballsActive >= maxSimultaneousBalls) {
      document.getElementById('start-btn').disabled = true;
    }
  }

  document.getElementById('start-btn').onclick = launchBall;

  // --- –ú–æ–¥–∞–ª–∫–∞ –∏ FOMO-—Ç–∞–π–º–µ—Ä ---
  const OFFER_URL = 'https://tusitio.com'; // <-- –ø–æ–º–µ–Ω—è–π –Ω–∞ —Å–≤–æ–π!
  function showModal() {
    document.getElementById('modal-bg').style.display = 'flex';
    startTimer();
  }
  let timerInt, timerSec = 300;
  function startTimer(){
    timerSec = 300;
    function updateTimer(){
      let min = Math.floor(timerSec/60), sec = timerSec%60;
      document.getElementById('timer').innerHTML = `<b>Tiempo restante:</b> <span style="color:#ffd24e;">${min}:${sec<10?'0'+sec:sec}</span>`;
      if(timerSec<=0){
        clearInterval(timerInt);
        document.getElementById('timer').innerHTML = "<span style='color:#ff3b5b'>La oferta ha expirado.</span>";
        document.getElementById('collect-btn').disabled = true;
        document.getElementById('collect-btn').style.opacity = .5;
        document.getElementById('collect-btn').innerHTML = "Tiempo terminado";
      }
      timerSec--;
    }
    updateTimer();
    timerInt = setInterval(updateTimer,1000);
  }
  document.getElementById('collect-btn').onclick = function() {
    window.location.href = OFFER_URL;
  };

  // --- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ—Å–µ—Ç –∏–≥—Ä—ã –ø–æ—Å–ª–µ —Å–±–æ—Ä–∞ –±–æ–Ω—É—Å–∞ ---
  document.getElementById('modal-bg').addEventListener('click', function(e){
    if(e.target === this){
      this.style.display='none';
      resetGame();
    }
  });
  function resetGame(){
    ballsLeft = 10;
    ballsActive = 0;
    document.getElementById('balls').innerText = ballsLeft;
    document.getElementById('start-btn').disabled = false;
    drawPegs();
  }
</script>
</body>
</html>
